#!/bin/bash

echo "üîç Firebase Project Diagnostic Script"
echo "====================================="
echo ""

echo "üö® POTENTIAL ISSUES WITH CURRENT FIREBASE PROJECT:"
echo ""

echo "1Ô∏è‚É£ DOMAIN RESTRICTIONS:"
echo "   ‚Ä¢ Check Firebase Console ‚Üí Authentication ‚Üí Settings ‚Üí Authorized domains"
echo "   ‚Ä¢ Ensure 'localhost' and your Vercel domain are listed"
echo "   ‚Ä¢ Remove any restrictive domain rules"
echo ""

echo "2Ô∏è‚É£ AUTHENTICATION PROVIDER SETTINGS:"
echo "   ‚Ä¢ Go to Authentication ‚Üí Sign-in method ‚Üí Google"
echo "   ‚Ä¢ Check if 'Enable' is turned ON"
echo "   ‚Ä¢ Verify 'Project support email' is set"
echo "   ‚Ä¢ Check for any error messages"
echo ""

echo "3Ô∏è‚É£ GOOGLE CLOUD OAUTH SETTINGS:"
echo "   ‚Ä¢ Go to Google Cloud Console ‚Üí APIs & Services ‚Üí OAuth consent screen"
echo "   ‚Ä¢ Check if 'Publishing status' is 'Testing' or 'In production'"
echo "   ‚Ä¢ Verify 'Test users' includes your emails (if in testing mode)"
echo "   ‚Ä¢ Check for any OAuth restrictions"
echo ""

echo "4Ô∏è‚É£ FIREBASE PROJECT SETTINGS:"
echo "   ‚Ä¢ Go to Firebase Console ‚Üí Project Settings (gear icon)"
echo "   ‚Ä¢ Check 'General' tab for any warnings"
echo "   ‚Ä¢ Look at 'Service accounts' tab for restrictions"
echo "   ‚Ä¢ Check 'Usage and billing' for quota issues"
echo ""

echo "5Ô∏è‚É£ FIRESTORE RULES:"
echo "   ‚Ä¢ Go to Firestore Database ‚Üí Rules"
echo "   ‚Ä¢ Ensure rules allow read access to whitelist collection"
echo "   ‚Ä¢ Check for any restrictive rules"
echo ""

echo "6Ô∏è‚É£ API QUOTAS AND LIMITS:"
echo "   ‚Ä¢ Go to Google Cloud Console ‚Üí APIs & Services ‚Üí Dashboard"
echo "   ‚Ä¢ Check 'Firebase Authentication API' for quota limits"
echo "   ‚Ä¢ Look for any rate limiting or quota exceeded errors"
echo ""

echo "üîß QUICK FIXES TO TRY:"
echo ""

echo "A) RESET AUTHENTICATION SETTINGS:"
echo "   ‚Ä¢ Go to Authentication ‚Üí Settings ‚Üí General"
echo "   ‚Ä¢ Check 'User actions' for any restrictions"
echo "   ‚Ä¢ Verify 'Session timeout' is reasonable"
echo ""

echo "B) CHECK GOOGLE SIGN-IN SETTINGS:"
echo "   ‚Ä¢ Authentication ‚Üí Sign-in method ‚Üí Google"
echo "   ‚Ä¢ Click 'Edit' and re-save settings"
echo "   ‚Ä¢ Ensure 'Enable' is checked"
echo ""

echo "C) VERIFY DOMAIN AUTHORIZATION:"
echo "   ‚Ä¢ Authentication ‚Üí Settings ‚Üí Authorized domains"
echo "   ‚Ä¢ Add 'localhost' if not present"
echo "   ‚Ä¢ Add your Vercel domain if not present"
echo ""

echo "D) CHECK PROJECT BILLING:"
echo "   ‚Ä¢ Ensure project has billing enabled"
echo "   ‚Ä¢ Check for any billing alerts or restrictions"
echo ""

echo "‚ùì WHY NEW FIREBASE PROJECT WILL HELP:"
echo "   ‚Ä¢ Fresh configuration with no inherited restrictions"
echo "   ‚Ä¢ Default settings that work out of the box"
echo "   ‚Ä¢ No domain restrictions or authentication rules"
echo "   ‚Ä¢ Clean OAuth consent screen setup"
echo "   ‚Ä¢ No quota or billing issues from previous usage"
echo ""

echo "‚úÖ RECOMMENDATION:"
echo "   Create new Firebase project for clean slate"
echo "   This will eliminate all potential configuration issues"
echo "   Your current project likely has restrictive settings"
echo "   that are blocking new user authentications"
